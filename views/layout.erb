<!DOCTYPE html>
<html lang="en">
<<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Meme Explorer üòé | Explore Funny, Wholesome & Trending Memes</title>

  <!-- üîç Basic SEO -->
  <meta name="description" content="Explore funny, wholesome, and trending memes from across the web. Meme Explorer üòé is your daily dose of laughter, positivity, and viral humor!">
  <meta name="keywords" content="memes, funny memes, wholesome memes, dank memes, trending memes, Meme Explorer, meme search, meme app">
  <meta name="author" content="Meme Explorer Team">

  <!-- üì± Mobile Optimization -->
  <meta name="theme-color" content="#e52e71">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- üí¨ Open Graph / Facebook / Discord / LinkedIn -->
  <meta property="og:title" content="Meme Explorer üòé | Discover Funny & Trending Memes">
  <meta property="og:description" content="Your daily meme adventure ‚Äî funny, wholesome, and trending memes all in one place!">
  <meta property="og:image" content="https://your-domain.com/images/placeholder.jpg">
  <meta property="og:url" content="https://your-domain.com/">
  <meta property="og:type" content="website">

  <!-- üê¶ Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Meme Explorer üòé">
  <meta name="twitter:description" content="Explore the funniest memes online ‚Äî wholesome, dank, and trending in one place!">
  <meta name="twitter:image" content="https://your-domain.com/images/placeholder.jpg">

  <!-- üîó Favicon & Manifest -->
  <link rel="icon" href="/images/favicon.png" type="image/png">
  <link rel="apple-touch-icon" href="/images/favicon.png">
  <link rel="manifest" href="/manifest.json">

  <!-- üé® Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap" rel="stylesheet">

  <!-- üíÖ Styles -->
  <style>
    body { font-family: 'Comic Neue', cursive; margin:0; background:#fefefe; transition:0.5s; }
    header { background:linear-gradient(90deg,#ff8a00,#e52e71); color:#fff; padding:20px; text-align:center; position:sticky; top:0; z-index:100; }
    header nav { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:10px; }
    header nav a { background: rgba(255,255,255,0.15); color:#fff; padding:8px 14px; border-radius:8px; font-weight:600; text-decoration:none; transition:0.2s; }
    header nav a:hover { background: rgba(255,255,255,0.35); transform: translateY(-2px);}
    main { max-width:1100px; margin:0 auto; padding:20px;}
    footer { text-align:center; padding:20px; background:#333; color:#fff;}
    form { text-align:center; margin:20px 0;}
    form input[type=text]{padding:10px;border-radius:12px 0 0 12px;border:1px solid #ccc;width:260px;}
    form button{padding:10px 16px;border:none;border-radius:0 12px 12px 0;background:#e52e71;color:#fff;cursor:pointer;}
    img { max-width:100%; border-radius:8px; }
  </style>
</head>

<body>
<header>
  <h1><a href="/" style="color:white;text-decoration:none;">Meme Explorer üòé</a></h1>
  <nav>
    <a href="/category/funny">Funny</a>
    <a href="/category/wholesome">Wholesome</a>
    <a href="/category/dank">Dank</a>
    <a href="/category/selfcare">Self Care</a>
    <a href="/trending">Trending</a>
    <a href="/metrics">üìà Metrics</a>
    <a href="/random">Random üé≤</a>
  </nav>
</header>

<form action="/search" method="get">
  <input type="text" name="q" placeholder="Search memes..." value="<%= params[:q] %>">
  <button>Search</button>
</form>

<main>
  <%= yield %>
</main>

<footer>
  <p>Built with ‚ù§Ô∏è using Sinatra</p>
</footer>
</body>
</html>
<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("form.like-form").forEach(form => {
    form.addEventListener("submit", async e => {
      e.preventDefault();

      const button = form.querySelector("button");
      const url = form.querySelector("input[name='url']").value;
      const likesSpan = form.closest(".meme-container").querySelector("#meme-likes");

      try {
        const res = await fetch(form.action, {
          method: "POST",
          body: new URLSearchParams(new FormData(form)),
          headers: { "Accept": "application/json" }
        });

        const data = await res.json();
        if (!res.ok) throw new Error(data.error || "Request failed");

        // Update button & likes
        if (data.liked) {
          button.textContent = "üíî Unlike";
          button.classList.add("liked");
        } else {
          button.textContent = "‚ù§Ô∏è Like";
          button.classList.remove("liked");
        }

        if (likesSpan) likesSpan.textContent = data.likes;

      } catch (err) {
        console.error("Like AJAX error:", err);
      }
    });
  });
});
</script>
