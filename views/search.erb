<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
  <h1 style="margin-bottom: 10px;">Search Results</h1>
  <p style="color: #666; margin-bottom: 20px;">
    <% if @query %>
      Searching for: <strong><%= @query %></strong>
    <% else %>
      Enter a search term above
    <% end %>
  </p>

  <% if @results.empty? %>
    <div style="text-align: center; padding: 60px 20px; background: #f5f5f5; border-radius: 12px;">
      <p style="font-size: 18px; color: #999;">No memes found for "<%= @query %>" üò¢</p>
      <p style="color: #aaa; margin-top: 10px;">Try a different search term!</p>
    </div>
  <% else %>
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-bottom: 40px;">
      <% @results.each do |meme| %>
        <div style="background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s, box-shadow 0.2s; cursor: pointer;" 
             onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)';"
             onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(0,0,0,0.1)';">
          
          <!-- Thumbnail -->
          <% image_url = meme["url"] || meme["file"] %>
          <div style="position: relative; width: 100%; height: 180px; background: #f0f0f0; overflow: hidden;">
            <img src="<%= image_url %>" 
                 alt="<%= meme['title'] %>"
                 style="width: 100%; height: 100%; object-fit: cover;"
                 onerror="this.src='/images/funny1.jpeg';">
            
            <!-- Source Badge -->
            <div style="position: absolute; top: 8px; right: 8px; padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: bold; background: <%= meme['source'] == 'reddit' ? '#FF4500' : '#4caf50' %>; color: white;">
              <%= meme['source'].upcase %>
            </div>
          </div>
          
          <!-- Content -->
          <div style="padding: 12px;">
            <h3 style="margin: 0 0 8px; font-size: 14px; font-weight: 600; line-height: 1.3; color: #333; min-height: 40px; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;">
              <%= meme['title'] %>
            </h3>
            
            <p style="margin: 8px 0; font-size: 12px; color: #666;">
              r/<%= meme['subreddit'] %>
            </p>
            
            <!-- Engagement Stats -->
            <div style="display: flex; gap: 12px; padding-top: 12px; border-top: 1px solid #eee; margin-top: 12px; font-size: 13px;">
              <div style="flex: 1; text-align: center;">
                <div style="color: #e52e71; font-weight: 600;"><%= meme['likes'] %></div>
                <div style="color: #999; font-size: 11px;">Likes</div>
              </div>
              <div style="flex: 1; text-align: center;">
                <div style="color: #2196F3; font-weight: 600;"><%= meme['views'] || '0' %></div>
                <div style="color: #999; font-size: 11px;">Views</div>
              </div>
            </div>
            
            <!-- View Button -->
            <a href="<%= image_url.start_with?('/') ? '/saved/' + meme['subreddit'] : '#' %>" 
               style="display: block; margin-top: 12px; padding: 8px; text-align: center; background: #ff9800; color: white; text-decoration: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; transition: background 0.2s;"
               onmouseover="this.style.background='#f57c00';"
               onmouseout="this.style.background='#ff9800';">
              View Meme
            </a>
          </div>
        </div>
      <% end %>
    </div>
    
    <p style="text-align: center; color: #999; margin-top: 30px;">
      Found <strong><%= @results.size %></strong> meme<%= @results.size != 1 ? 's' : '' %>
    </p>
  <% end %>

  <p style="margin-top: 40px; text-align: center;">
    <a href="/" style="color: #2196F3; text-decoration: none; font-weight: 600;">‚Üê Back to Home</a>
  </p>
</div>

<style>
  @media (max-width: 768px) {
    div[style*="grid-template-columns"] {
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)) !important;
    }
  }
  
  @media (max-width: 480px) {
    div[style*="grid-template-columns"] {
      grid-template-columns: 1fr !important;
    }
  }
</style>
